//-
//- Main content
//-
//- @param {String} site
//- @param {String} description
//- @param {Boolean} fluid
//- @param {Object} env
//- @param {Array} styles
//- @block {Block} styles
//- @block {Block} header
//- @return {Content}
//- @api public
//-

!!! 5
html(data-ng-app=ngapp)
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title(ng-bind="'FLOKK | ' + $root.title") FLOKK | #{title}
    meta(name='description', content=description)
    meta(name='author', content='The Flokk, LLC')
    meta(name='viewport', content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0')

    //- TODO figure out the favicon

    block styles
      each style in styles
        link(href=style, rel="stylesheet")

    //if lt IE 9
      script(src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/2.1.0/es5-shim.min.js")

    script.
      if (window.location.hash === '#_=_') window.location.hash = '';
      var s = Date.now ? Date.now() : new Date().getTime();
      window.env = !{JSON.stringify(env)};

  body(data-ng-controller="IndexController")
    //if lt IE 10
      p.browsehappy
        | You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.

    block sidenav-handlers

    header
      block sidenav-contents

    main(role="main")
      menu.topmenu
        block topmenu
      block content

    footer
      block footer
        p: a(href=site+"/copyright") Â© 2013 The Flokk, LLC. All rights reserved

    block scripts
      each script in scripts
        script(src=script)

    script.
      if (window.metric) metric({'measure': 'page_load_time', val: (Date.now() - s), units: 'ms'});
